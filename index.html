<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AR.js NFT Poster Replacement</title>

<script src="https://cdn.jsdelivr.net/gh/aframevr/aframe@1.4.2/dist/aframe.min.js"></script>
<script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>

<style>
body { margin: 0; overflow: hidden; }
.arjs-loader {
  position: absolute; top:0; left:0; width:100%; height:100%;
  background: rgba(0,0,0,0.7); color:white; display:flex;
  align-items:center; justify-content:center; font-size:1.3em; z-index:9999;
}
</style>
</head>
<body>

<div class="arjs-loader" id="loader">Loading AR — Allow camera access...</div>

<a-scene
  embedded
  vr-mode-ui="enabled:false"
  renderer="logarithmicDepthBuffer:true"
  arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled:false;"
>
  <a-nft
    id="marker"
    type="nft"
    url="old"
    smooth="true"
    smoothCount="10"
    smoothTolerance="0.01"
    smoothThreshold="5"
  >
    <!-- Replacement plane, adjust scale for visibility -->
    <a-plane
      id="replacement"
      src="new.jpg"
      rotation="-90 0 0"
      width="2"
      height="2"
      position="0 0 0"
    ></a-plane>
  </a-nft>

  <a-entity camera></a-entity>
</a-scene>

<script>
const loader = document.getElementById('loader');
const marker = document.getElementById('marker');
const replacement = document.getElementById('replacement');

// Hide loader when marker is found
marker.addEventListener('markerFound', () => {
  loader.style.display = 'none';
  replacement.setAttribute('visible', true);
  console.log('Marker detected — showing replacement!');
});

// Show loader when marker is lost
marker.addEventListener('markerLost', () => {
  loader.style.display = 'flex';
  replacement.setAttribute('visible', false);
  console.log('Marker lost');
});
</script>

</body>
</html>
